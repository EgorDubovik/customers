!function(e){e.fn.timerD=function(t){var n={amPM:!0,setTime:moment(),onChange:null,typeView:"daysName",returnFormat:"YYYY-MM-DD HH:mm"},a=e.extend({},n,t);a.setTime=moment(a.setTime);var i=e(this),d=null,o=null,s=!1,r=!1,m=!1,u=!0;let l=null,c=null,f=null,p=null,h=null,y=null;this.init=function(){return $(),g(),_(),T(),v(),this};var _=function(){"daysName"==a.typeView?(s=!1,r=!1,m=!1,u=!0):(s=!0,r=!0,m=!0,u=!1)},$=function(){o=(d=a.setTime).clone()},g=function(){let e=15*Math.round(o.minute()/15);o.minute(e),o.second(0)},T=function(){if(i.empty(),console.log(i),i.css("display","flex"),u){let t=e("<div>").addClass("day-name").addClass("conteiner");i.append(t),l=new C(t,{dataType:"daysName",setTime:o,onDataChange:function(e,t){o.month(t.month()),o.date(t.date()),o.year(t.year()),v()}})}if(s){let n=e("<div>").addClass("month").addClass("conteiner");i.append(n),c=new C(n,{dataType:"months",setTime:o,onDataChange:function(e){o.month(e),f.refreshData(o),v()}})}if(r){let d=e("<div>").addClass("days").addClass("conteiner");i.append(d),f=new C(d,{dataType:"days",setTime:o,onDataChange:function(e){o.date(e),v()}})}if(m){let _=e("<div>").addClass("years").addClass("conteiner");i.append(_),p=new C(_,{dataType:"years",setTime:o,onDataChange:function(e){o.year(e),v()}})}{let $=e("<div>").addClass("hour").addClass("conteiner");i.append($),drumyHours=new C($,{dataType:"hours",setTime:o,onDataChange:function(e){a.amPM&&(e=12==(e="PM"==o.format("A")&&12!=e?e+12:e)&&"AM"==o.format("A")?0:e),o.hour(e),v()}})}{let g=e("<div>").addClass("minute").addClass("conteiner");i.append(g),h=new C(g,{dataType:"minutes",setTime:o,onDataChange:function(e){o.minute(e),v()}})}if(a.amPM){let T=e("<div>").addClass("ampm").addClass("conteiner");i.append(T),y=new C(T,{dataType:"ampm",isLoop:!1,setTime:o,onDataChange:function(e){o.format("A")!=e&&("AM"==e?o.add(-12,"hours"):o.add(12,"hours")),v()}})}},v=function(){a.onChange&&(console.log(o,o.format(a.returnFormat)),a.onChange(o.format(a.returnFormat)))},C=function(t,n){var a={isLoop:!0,itemHeight:40,dataType:null,dataIndex:0,data:[],setTime:moment(),amPM:!0,onDataChange:null},n=e.extend({},a,n),i=n.data,d=0,t=t,o=this;let s=n.setTime.clone();this.hummer=null;var r=e("<div>").addClass("drum-items").css("margin-top","0px").css("transform","translate3d(0px, 0px, 0px)"),m=e("<div>").addClass("drum-inner"),u=e("<div>").addClass("drum-wrapper"),l=function(){"months"==n.dataType?i=p(n.setTime.month()):"days"==n.dataType?i=h():"years"==n.dataType?i=y():"daysName"==n.dataType?i=f(s):"hours"==n.dataType?i=_():"minutes"==n.dataType?i=$():"ampm"==n.dataType&&(i=["AM","PM"])},c=function(e){if("months"==n.dataType){let t=i[d+e];s.month(t),i=p()}else if("days"==n.dataType){let a=i[d+e];s.date(a),i=h()}else if("years"==n.dataType)s.add(e,"year"),i=y();else if("hours"==n.dataType){let o=i[d+e];s.hour(o),i=_()}else if("minutes"==n.dataType){let r=i[d+e];s.minute(r),i=$()}else"daysName"==n.dataType&&(s.add(e,"days"),i=f(s))},f=function(e){let t=e.clone().add(-10,"days"),n=[],a=moment();for(let i=0;i<30;i++)t.isSame(a,"date")?n.push("Today"):n.push(t.format("ddd MMM DD")),t.add(1,"days");return n},p=function(){let e=s.month(),t=["January","February","March","April","May","June","July","August","September","October","November","December"],n=t.slice(e).concat(t.slice(0,e));return n.concat(n,n)},h=function(){let e=s.daysInMonth(),t=s.date(),n=Array.from({length:e-t+1},(e,n)=>n+t).concat(Array.from({length:t-1},(e,t)=>t+1));return n.concat(n,n)},y=function(){let e=s.year();return Array.from({length:30},(t,n)=>n+e-10)},_=function(){let e=n.amPM?12:24,t=s.hour()%e;t=0==t?e:t;var a=Array.from({length:e-t+1},(e,n)=>n+t).concat(Array.from({length:t-1},(e,t)=>t+1));return a.concat(a,a)},$=function(){let e,t=Math.round(s.minute()/15);var n=Array.from({length:Math.round(4)-t},(e,n)=>(n+t)*15).concat(Array.from({length:t},(e,t)=>15*t));return n.concat(n,n)},g=function(e){if(e>0)for(let t=e-1;t>=0;t--)r.find("div:first").detach(),r.append('<div class="drum-item">'+T(i.length-1-t)+"</div>");else if(e<0)for(let n=-1*e-1;n>=0;n--)r.find("div:last").detach(),r.prepend('<div class="drum-item">'+T(n)+"</div>")},T=function(e){return i[0==e]?"00":i[e]},v=function(){u.empty(),m.empty(),r.empty(),u.append(m),m.append(r);for(let e=0;e<i.length;e++)r.append('<div class="drum-item">'+T(e)+"</div>");t.append(u)};this.setEvent=function(){var e=0,t=(i.length-1)*n.itemHeight;this.hummer=new Hammer(r[0],{recognizers:[[Hammer.Pan]]}),this.hummer.on("panstart",function(){e=w(),r.css("transition","")}),this.hummer.on("panmove",function(a){let i=-1*M();if(i!=d){let o=i-d;n.isLoop?(c(o),g(o),e+=o*n.itemHeight):d+=o,A()}let s=e+a.deltaY;n.isLoop||(s=s>=0?0:s<=-1*t?-1*t:s),x(s)}),this.hummer.on("panend",function(){r.css("transition","margin-top 1s cubic-bezier(0.2, 1, 0.2, 1) 0s"),D(d),C()}),u.on("mousewheel",function(e){let t=e.originalEvent.deltaY>0?1:-1;n.isLoop?(c(t),g(t)):d+=t,A(),C(),e.preventDefault()})};let C=function(){let e=o.getData();n.onDataChange&&n.onDataChange(e,s)};var D=function(e){x(-(e*n.itemHeight*1))},M=function(){return Math.round(w()/n.itemHeight)},w=function(){return parseInt(r.css("margin-top"))},x=function(e){r.css("margin-top",e+"px")},A=function(){t.find(".drum-item").removeClass("active"),t.find(".drum-item").eq(d).addClass("active")},P=function(){l(),v(),d="ampm"!=n.dataType?Math.round(i.length/3):"PM"==s.format("A")?1:0,A(),D(d)};this.refreshData=function(e){s=e,P()},this.getData=function(){return i[d]},P(),o.setEvent()};return this.setTime=function(e){a.setTime=moment(e),$(),T(),v()},this.init()}}(jQuery);